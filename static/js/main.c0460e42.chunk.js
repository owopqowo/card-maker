(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{15:function(e,t,a){e.exports={login:"login_login__lBxS1",title:"login_title__14fSA",buttons:"login_buttons__Q550b",button:"login_button__2GKZJ","button-img":"login_button-img__1E2oX","button-text":"login_button-text__18POx"}},16:function(e,t,a){e.exports={makerBlue:"#00b8f5","form-item":"form_form-item__1AhHU",form:"form_form__16xkY","input-name":"form_input-name__rwB_a","input-company":"form_input-company__1mPYn","select-theme":"form_select-theme__2NpDz","input-file":"form_input-file__MyA4h","input-email":"form_input-email__1Fpwj","input-title":"form_input-title__3t69o","input-contents":"form_input-contents__YFsCA"}},17:function(e,t,a){e.exports={makerBlue:"#00b8f5",makerColorful:"linear-gradient(to right bottom, #e37db7, #d088d1, #b594e6, #92a1f4, #67acfa, #4bb6fc, #2bbffb, #00c7f6, #07d2f4, #2addf1, #47e7ec, #63f0e7)",card:"card_card__22gD1",info:"card_info__34XdW","info-name":"card_info-name__1Ey_7","info-company":"card_info-company__2tFSQ","box-img":"card_box-img__1WpQw",img:"card_img__nyrQT"}},22:function(e,t,a){e.exports={mediaQuery:"62rem",makerBlue:"#00b8f5",maker:"maker_maker__1EfGY",main:"maker_main__14RaK",section:"maker_section__11Pyu",title:"maker_title__22DYC"}},23:function(e,t,a){e.exports={makerLightGrey:"#e8e7e6",makerLightPink:"#ffeae8",file:"upload_file__1PQDt",input:"upload_input__3ULEJ",button:"upload_button__q8yn6",grey:"upload_grey__1plIQ",pink:"upload_pink__1A_H9",sppiner:"upload_sppiner__bx5lh",rotation:"upload_rotation__19pt4"}},31:function(e,t,a){e.exports={makerWhite:"white",makerBlue:"#00b8f5",header:"header_header__1nHVU",title:"header_title__2ALuw",logout:"header_logout__3_FNw"}},32:function(e,t,a){e.exports={buttons:"buttons_buttons__tF_St"}},41:function(e,t,a){e.exports={footer:"footer_footer__3DFOS"}},43:function(e,t,a){},44:function(e,t,a){e.exports={makerBlue:"#00b8f5"}},45:function(e,t,a){e.exports={mediaQuery:"62rem",app:"app_app__1oBwG"}},51:function(e,t,a){},52:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(14),c=a(3),i=a.n(c),r=a(40),s=a.n(r),o=(a(51),a(52),a(29)),l=a(8),u=a(31),d=a.n(u),m=a(2),j=function(e){return Object(m.jsxs)("header",{className:d.a.header,"data-type":e.onLogout&&"login",children:[Object(m.jsx)("h1",{className:d.a.title,children:"Card Maker"}),e.onLogout&&Object(m.jsx)("button",{className:d.a.logout,onClick:e.onLogout,children:"Log Out"})]})},b=a(41),f=a.n(b),p=function(e){return Object(m.jsx)("footer",{className:f.a.footer,children:Object(m.jsx)("p",{children:"copyright"})})},h=a(15),O=a.n(h),_=function(e){var t=e.authService,a=Object(l.f)(),n=function(e){a.push({pathname:"/main",state:{id:e}})},i=function(e){t.login(e.currentTarget.dataset.login).then((function(e){n(e.user.uid)}))};return Object(c.useEffect)((function(){t.onAuthChange((function(e){e&&n(e.uid)}))})),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j,{}),Object(m.jsxs)("div",{className:O.a.login,children:[Object(m.jsx)("h2",{className:O.a.title,children:"login"}),Object(m.jsxs)("div",{className:O.a.buttons,children:[Object(m.jsxs)("button",{"data-login":"Google",className:O.a.button,onClick:i,children:[Object(m.jsx)("img",{src:"".concat("/card-maker","/images/logo_google.png"),className:O.a["button-img"],alt:""}),Object(m.jsx)("span",{className:O.a["button-text"],children:"Login with Google"})]}),Object(m.jsxs)("button",{"data-login":"Github",className:O.a.button,onClick:i,children:[Object(m.jsx)("img",{src:"".concat("/card-maker","/images/logo_github.png"),className:O.a["button-img"],alt:""}),Object(m.jsx)("span",{className:O.a["button-text"],children:"Login with GitHub"})]})]}),Object(m.jsx)(p,{})]})]})},x=a(20),g=a(22),v=a.n(g),N=a(19),k=a(32),y=a.n(k),C=function(e){return Object(m.jsx)("div",{className:y.a.buttons,children:e.card?Object(m.jsx)("button",{className:y.a["button-del"],onClick:e.onSubmit,children:"Delete"}):Object(m.jsx)("button",{className:y.a["button-add"],onClick:e.onSubmit,children:"Add"})})},S=a(16),w=a.n(S),R=function(e){var t=e.FileInput,a=e.card,i=e.onAdd,r=e.deleteCard,s=e.updateCard,o=Object(c.useRef)(),l=Object(c.useRef)(),u=Object(c.useRef)(),d=Object(c.useRef)(),j=Object(c.useRef)(),b=Object(c.useRef)(),f=Object(c.useRef)(),p=Object(c.useState)({fileName:null,fileURL:null}),h=Object(x.a)(p,2),O=h[0],_=h[1],g=function(e){null!=e.currentTarget&&a&&(e.preventDefault(),s(Object(n.a)(Object(n.a)({},a),{},Object(N.a)({},e.currentTarget.name,e.currentTarget.value))))};return Object(m.jsx)("li",{className:w.a["form-item"],children:Object(m.jsxs)("form",{className:w.a.form,ref:o,children:[Object(m.jsx)("div",{className:w.a["input-name"],children:Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:a&&a.name,ref:l,onChange:g})}),Object(m.jsx)("div",{className:w.a["input-company"],children:Object(m.jsx)("input",{type:"text",name:"company",placeholder:"Company",value:a&&a.company,ref:u,onChange:g})}),Object(m.jsx)("div",{className:w.a["select-theme"],children:Object(m.jsxs)("select",{name:"theme",value:a&&a.theme,ref:d,onChange:g,children:[Object(m.jsx)("option",{value:"",children:"option"}),Object(m.jsx)("option",{value:"light",children:"light"}),Object(m.jsx)("option",{value:"blue",children:"blue"}),Object(m.jsx)("option",{value:"gradient",children:"gradient"})]})}),Object(m.jsx)("div",{className:w.a["input-file"],children:Object(m.jsx)(t,{name:a?a.fileName:O.fileName,onFileChange:function(e){a?s(Object(n.a)(Object(n.a)({},a),{},{fileName:e.name,fileURL:e.url})):_({fileName:e.name,fileURL:e.url})}})}),Object(m.jsx)("div",{className:w.a["input-email"],children:Object(m.jsx)("input",{type:"email",name:"email",value:a&&a.email,ref:j,onChange:g})}),Object(m.jsx)("div",{className:w.a["input-title"],children:Object(m.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:a&&a.title,ref:b,onChange:g})}),Object(m.jsx)("div",{className:w.a["input-contents"],children:Object(m.jsx)("textarea",{name:"message",value:a&&a.message,ref:f,onChange:g})}),Object(m.jsx)(C,{card:a,onSubmit:function(e){if(e.preventDefault(),a)r(a);else{var t={id:Date.now(),name:l.current.value||"",company:u.current.value||"",theme:d.current.value||"",email:j.current.value||"",title:b.current.value||"",message:f.current.value||"",fileName:O.fileName||"",fileURL:O.fileURL||""};o.current.reset(),_({fileName:null,fileURL:null}),i(t)}}})]})})},F=a(43),L=a.n(F),A=function(e){var t=e.FileInput,a=e.cards,n=e.addCard,c=e.updateCard,i=e.deleteCard;return Object(m.jsxs)("ul",{className:L.a.forms,children:[Object.keys(a).map((function(e){return Object(m.jsx)(R,{FileInput:t,card:a[e],updateCard:c,deleteCard:i},e)})),Object(m.jsx)(R,{onAdd:n,FileInput:t})]})},I=a(17),U=a.n(I),B=function(e){var t=e.card,a=t.name,n=t.company,c=t.title,i=t.email,r=t.message,s=t.theme,o=t.fileName,l=t.fileURL||"/card-maker/images/profile_default.jpg";return Object(m.jsxs)("li",{className:U.a.card,"data-type":s,children:[Object(m.jsxs)("dl",{className:U.a.info,children:[Object(m.jsx)("dt",{className:U.a["info-name"],children:a}),Object(m.jsx)("dt",{className:U.a["info-company"],children:n}),Object(m.jsxs)("dd",{className:U.a["info-job"],children:[Object(m.jsx)("i",{className:"icon suitcase"}),c]}),Object(m.jsxs)("dd",{className:U.a["info-email"],children:[Object(m.jsx)("i",{className:"icon mail"}),i]}),Object(m.jsxs)("dd",{className:U.a["info-message"],children:[Object(m.jsx)("i",{className:"icon chat"}),r]})]}),Object(m.jsx)("div",{className:U.a["box-img"],children:Object(m.jsx)("img",{src:l,alt:o,className:U.a.img})})]})},D=a(44),G=a.n(D),P=function(e){var t=e.cards;return Object(m.jsx)("ul",{className:G.a.cards,children:Object.keys(t).map((function(e){return Object(m.jsx)(B,{card:t[e]},e)}))})},E=function(e){var t=e.FileInput,a=e.authService,i=e.cardRepository,r=Object(l.f)(),s=r.location.state,o=Object(c.useState)({}),u=Object(x.a)(o,2),d=u[0],b=u[1],f=Object(c.useState)(s&&s.id),h=Object(x.a)(f,2),O=h[0],_=h[1],g=function(e){b((function(t){var a=Object(n.a)({},t);return a[e.id]=e,a})),i.saveCard(O,e)};return Object(c.useEffect)((function(){if(console.log(O),O){var e=i.syncCard(O,(function(e){console.log("test"),b(e)}));return function(){return e()}}}),[O]),Object(c.useEffect)((function(){a.onAuthChange((function(e){e?_(e.uid):r.push("/")}))})),Object(m.jsxs)("div",{className:v.a.maker,children:[Object(m.jsx)(j,{onLogout:function(){a.logout()}}),Object(m.jsxs)("main",{className:v.a.main,children:[Object(m.jsxs)("section",{className:v.a.section,children:[Object(m.jsx)("h2",{className:v.a.title,children:"Card Maker"}),Object(m.jsx)(A,{FileInput:t,cards:d,addCard:g,updateCard:g,deleteCard:function(e){b((function(t){var a=Object(n.a)({},t);return delete a[e.id],a})),i.removeCard(O,e)}})]}),Object(m.jsxs)("section",{className:v.a.section,children:[Object(m.jsx)("h2",{className:v.a.title,children:"Card Preview"}),Object(m.jsx)(P,{cards:d})]})]}),Object(m.jsx)(p,{})]})},Q=a(45),T=a.n(Q);var z,J=function(e){var t=e.FileInput,a=e.authService,n=e.cardRepository;return Object(m.jsx)("div",{className:T.a.app,children:Object(m.jsx)(o.a,{basename:"/card-maker",children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/",exact:!0,children:Object(m.jsx)(_,{authService:a})}),Object(m.jsx)(l.a,{path:"/main",children:Object(m.jsx)(E,{FileInput:t,authService:a,cardRepository:n})})]})})})},M=a(24),Y=a(25),H=a(46),K=a(37),W=(z={apiKey:"AIzaSyAFG2ZdrB6vUbzuBSzxZclxjJpIv-6GCKM",authDomain:"".concat("business-card-maker-f0744",".firebaseapp.com"),databaseURL:"https://".concat("business-card-maker-f0744",".firebaseio.com"),projectId:"business-card-maker-f0744"},Object(N.a)(z,"databaseURL","https://".concat("business-card-maker-f0744",".firebaseio.com/")),Object(N.a)(z,"storageBucket","".concat("business-card-maker-f0744",".appspot.com")),z),Z=K.a.initializeApp(W),X=(K.a.database(),function(){function e(){Object(M.a)(this,e)}return Object(Y.a)(e,[{key:"login",value:function(e){var t=new(H.a.auth["".concat(e,"AuthProvider")]);return Z.auth().signInWithPopup(t)}},{key:"logout",value:function(){Z.auth().signOut()}},{key:"onAuthChange",value:function(e){Z.auth().onAuthStateChanged((function(t){e(t)}))}}]),e}()),q=function(){function e(){Object(M.a)(this,e)}return Object(Y.a)(e,[{key:"syncCard",value:function(e,t){var a=Z.database().ref("".concat(e,"/cards/"));return a.on("value",(function(e){var a=e.val();a&&t(a)})),function(){return a.off()}}},{key:"saveCard",value:function(e,t){Z.database().ref("".concat(e,"/cards/").concat(t.id)).set(t)}},{key:"removeCard",value:function(e,t){Z.database().ref("".concat(e,"/cards/").concat(t.id)).remove()}}]),e}(),V=a(26),$=a.n(V),ee=a(30),te=function(){function e(){Object(M.a)(this,e)}return Object(Y.a)(e,[{key:"upload",value:function(){var e=Object(ee.a)($.a.mark((function e(t){var a,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),a.append("upload_preset","ykm2465i"),e.next=5,fetch("https://api.cloudinary.com/v1_1/dlllfist3/image/upload",{method:"POST",body:a});case 5:return n=e.sent,e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ae=a(23),ne=a.n(ae),ce=function(e){var t=e.imageUploader,a=e.name,n=e.onFileChange,i=Object(c.useState)(!1),r=Object(x.a)(i,2),s=r[0],o=r[1],l=Object(c.useRef)(),u=function(){var e=Object(ee.a)($.a.mark((function e(a){var c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,t.upload(a.target.files[0]);case 3:c=e.sent,o(!1),n({name:c.original_filename,url:c.url});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:ne.a.file,children:[Object(m.jsx)("input",{ref:l,className:ne.a.input,type:"file",accept:"images/*",name:"file",onChange:u}),s?Object(m.jsx)("span",{className:ne.a.sppiner}):Object(m.jsx)("button",{className:"".concat(ne.a.button," ").concat(a?ne.a.pink:ne.a.grey),onClick:function(e){e.preventDefault(),l.current.click()},children:a||"No file"})]})},ie=new X,re=new q,se=new te;s.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(J,{authService:ie,cardRepository:re,FileInput:function(e){return Object(m.jsx)(ce,Object(n.a)(Object(n.a)({},e),{},{imageUploader:se}))}})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.c0460e42.chunk.js.map